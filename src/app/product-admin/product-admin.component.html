<!-- Encabezado de la página con fondo degradado -->
<header class="p-4 border-b bg-gradient-to-r from-purple-500 to-orange-500">
  <h1 class="text-xl font-bold mb-4 text-white" id="page-title">Administrar Productos</h1>
</header>

<!-- Contenido principal de la página -->
<main role="main" aria-labelledby="page-title" class="p-4">

  <!-- Formulario para añadir o editar productos -->
  <section aria-label="Formulario para añadir o editar productos" class="form-container">
    <form (ngSubmit)="saveProduct()" #productForm="ngForm" class="space-y-4" aria-live="polite">

      <!-- Campo: Título -->
      <div class="form-group">
        <label for="title">Título</label>
        <input 
          id="title"
          [(ngModel)]="form.title"
          name="title"
          placeholder="Título"
          required
          aria-required="true"
          class="input-field"
        />
      </div>

      <!-- Campo: Descripción -->
      <div class="form-group">
        <label for="description">Descripción</label>
        <input 
          id="description"
          [(ngModel)]="form.description"
          name="description"
          placeholder="Descripción"
          required
          aria-required="true"
          class="input-field"
        />
      </div>

      <!-- Campo: Precio -->
      <div class="form-group">
        <label for="price">Precio</label>
        <input 
          id="price"
          type="number"
          [(ngModel)]="form.price"
          name="price"
          placeholder="Precio"
          required
          aria-required="true"
          class="input-field"
        />
      </div>

      <!-- Campo: Stock -->
      <div class="form-group">
        <label for="stock">Stock</label>
        <input 
          id="stock"
          type="number"
          [(ngModel)]="form.stock"
          name="stock"
          placeholder="Cantidad disponible"
          required
          aria-required="true"
          class="input-field"
        />
      </div>
      
      <!-- Campo: URL de Imagen -->
      <div class="form-group">
        <label for="image">URL de Imagen</label>
        <input 
          id="image"
          [(ngModel)]="form.image"
          name="image"
          placeholder="URL de Imagen"
          aria-describedby="imageDesc"
          class="input-field"
        />
        <small id="imageDesc" class="text-white">Debe ser una URL válida con formato de imagen.</small>
      </div>

      <!-- Botón enviar -->
      <button 
        type="submit"
        aria-label="Editar producto"
        class="submit-button"
      >
        {{ editing ? 'Actualizar' : 'Añadir' }} producto
      </button>
    </form>
  </section>

  <hr class="my-6" />

  <!-- Productos creados -->
  <section aria-labelledby="mis-productos" class="products-section">
    <h2 id="mis-productos" class="text-lg font-semibold mb-2 text-white">Mis Productos</h2>

    <div *ngIf="products.length > 0; else noProducts">
      @for (product of products; track product.id) {
        <article class="product-item" aria-labelledby="product-title">
          <h3 id="product-title" class="text-md font-bold">{{ product.title }}</h3>
          <img [src]="product.image" alt="Imagen del producto" width="100" />
          <p>{{ product.description }}</p>
          <p><strong>Precio:</strong> ${{ product.price }}</p>
          <p><strong>Stock disponible:</strong> {{ product.stock }}</p>
          <p><strong>Ventas:</strong> {{ product.sales }}</p>
          <p><strong>Ingresos generados:</strong> ${{ product.price * product.sales }}</p>

          <button 
            (click)="edit(product)" 
            aria-label="Editar producto"
            aria-expanded="false"
            class="edit-button"
          >
            Editar
          </button>
        </article>
      }

      <hr class="my-6" />

      <!-- Resumen de ventas -->
      <section aria-label="Resumen de ventas">
        <div class="summary-container">
          <h3 class="text-md font-bold mb-2">Resumen General</h3>
          <p><strong>Total de productos:</strong> {{ products.length }}</p>
          <p><strong>Total de ventas:</strong> {{ totalVentas }}</p>
          <p><strong>Ingresos totales:</strong> ${{ totalIngresos }}</p>
          <p><strong>Stock total disponible:</strong> {{ totalStock }}</p>
        </div>
      </section>
    </div>

    <ng-template #noProducts>
      <p class="text-white">No tienes productos aún.</p>
    </ng-template>
  </section>
</main>
