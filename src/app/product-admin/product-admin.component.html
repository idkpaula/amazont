<!-- Encabezado de la página con fondo degradado -->
<header class="p-4 border-b bg-gradient-to-r from-purple-500 to-orange-500">
  <!-- Título de la página -->
  <h1 class="text-xl font-bold mb-4 text-white" id="page-title">Administrar Productos</h1>
</header>

<!-- Contenido principal de la página -->
<main role="main" aria-labelledby="page-title" class="p-4">

  <!-- Sección del formulario para añadir o editar productos -->
  <section aria-label="Formulario para añadir o editar productos" class="form-container">
    <form (ngSubmit)="saveProduct()" #productForm="ngForm" class="space-y-4" aria-live="polite">

      <!-- Campo: Título del producto -->
      <div class="form-group">
        <label for="title">Título</label>
        <input 
          id="title"
          [(ngModel)]="form.title"
          name="title"
          placeholder="Título"
          required
          aria-required="true"
          class="input-field"
        />
      </div>

      <!-- Campo: Descripción del producto -->
      <div class="form-group">
        <label for="description">Descripción</label>
        <input 
          id="description"
          [(ngModel)]="form.description"
          name="description"
          placeholder="Descripción"
          required
          aria-required="true"
          class="input-field"
        />
      </div>

      <!-- Campo: Precio del producto -->
      <div class="form-group">
        <label for="price">Precio</label>
        <input 
          id="price"
          type="number"
          [(ngModel)]="form.price"
          name="price"
          placeholder="Precio"
          required
          aria-required="true"
          class="input-field"
        />
      </div>

      <!-- Campo: URL de imagen del producto -->
      <div class="form-group">
        <label for="image">URL de Imagen</label>
        <input 
          id="image"
          [(ngModel)]="form.image"
          name="image"
          placeholder="URL de Imagen"
          aria-describedby="imageDesc"
          class="input-field"
        />
        <!-- Descripción de ayuda para el campo de imagen -->
        <small id="imageDesc" class="text-white">Debe ser una URL válida con formato de imagen.</small>
      </div>

      <!-- Botón para añadir o actualizar producto -->
      <button 
        type="submit"
        aria-label="Editar producto"
        class="submit-button"
      >
        {{ editing ? 'Actualizar' : 'Añadir' }} producto
      </button>
    </form>
  </section>

  <!-- Separador visual -->
  <hr class="my-6" />

  <!-- Sección de productos ya creados -->
  <section aria-labelledby="mis-productos" class="products-section">
    <h2 id="mis-productos" class="text-lg font-semibold mb-2 text-white">Mis Productos</h2>

    <!-- Lista de productos -->
    <div *ngIf="products.length > 0; else noProducts">
      @for (product of products; track product.id) {
        <!-- Artículo individual de producto -->
        <article class="product-item" aria-labelledby="product-title">
          <h3 id="product-title" class="text-md font-bold">{{ product.title }}</h3>
          <img [src]="product.image" alt="Imagen del producto" width="100" />
          <p>{{ product.description }}</p>
          <p><strong>Precio: ${{ product.price }}</strong></p>
          <p>Ventas: {{ product.sales }}</p>
          <p>Ingresos generados: <strong>${{ product.price * product.sales }}</strong></p>

          <!-- Botón para editar el producto -->
          <button 
            (click)="edit(product)" 
            aria-label="Editar producto"
            aria-expanded="false"
            class="edit-button"
          >
            Editar
          </button>
        </article>
      }

      <!-- Separador visual -->
      <hr class="my-6" />

      <!-- Resumen general de las ventas -->
      <section aria-label="Resumen de ventas">
        <div class="summary-container">
          <h3 class="text-md font-bold mb-2">Resumen General</h3>
          <p>Total de ventas: <strong>{{ totalVentas }}</strong></p>
          <p>Ingresos totales: <strong>${{ totalIngresos }}</strong></p>
        </div>
      </section>
    </div>

    <!-- Plantilla alternativa si no hay productos -->
    <ng-template #noProducts>
      <p class="text-white">No tienes productos aún.</p>
    </ng-template>
  </section>
</main>
